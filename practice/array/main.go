package main

import "fmt"

/**
 * 该函数未化简, 保留了寻找该子串的功能
 * @param arr int整型一维数组 the array
 * @return int整型
 */
func maxLength(arr []int) int {
	// write code here
	var maxArr map[int]int
	var midArr = make(map[int]int)
	for k, v := range arr {
		// 未遇到相同的元素
		if _, ok := midArr[v]; !ok {
			// 记录每个元素的位置下标(相当于元素一一入栈(注: 不是栈操作, 类比的思想))
			midArr[v] = k
		} else {
			// 子串midArr中有该元素, 则进行一次判断
			if len(midArr) > len(maxArr) {
				maxArr = mapCopy(midArr)
			}
			dK := midArr[v]
			// 存在该元素, 则剔除事先存在的该元素与之前的所有元素
			for mk, mv := range midArr {
				if mv <= dK {
					delete(midArr, mk)
				}
			}
			// 新增该元素(带位置下标)
			midArr[v] = k
		}
		if k == len(arr)-1 {
			if len(midArr) > len(maxArr) {
				maxArr = midArr
			}
		}
	}
	return len(maxArr)
}

func mapCopy(originMap map[int]int) map[int]int {
	newMap := make(map[int]int)
	for _, v := range originMap {
		newMap[v] = originMap[v]
	}
	return newMap
}

func main() {
	fmt.Println(maxLength([]int{2, 3, 4, 5}))
	fmt.Println(maxLength([]int{2, 2, 3, 4, 3}))
	fmt.Println(maxLength([]int{2, 2, 3, 5, 2, 4, 6, 3}))
	data := []int{1988, 10036, 13287, 24377, 29106, 8933, 9124, 14803, 28081, 28614, 19887, 4078, 23539, 2956, 7669,
		11918, 25334, 6672, 8961, 15335, 23223, 29613, 29389, 22745, 30755, 29417, 20951, 31671, 19662, 17752, 20600, 26700, 28391,
		17342, 21105, 26912, 23916, 5492, 13511, 11767, 29850, 8973, 1490, 29595, 1704, 7224, 912, 22747, 27828, 5352, 21567, 1236, 9214,
		32179, 11562, 623, 19284, 31608, 23491, 29995, 5325, 25157, 25842, 2845, 32698, 22392, 11949, 20533, 28378, 24356, 26569, 18114,
		28365, 22710, 8719, 26936, 16587, 11992, 21139, 31025, 32150, 16021, 11329, 16307, 25773, 14782, 2233, 8881, 11203, 2189, 21341,
		13268, 25199, 28297, 10919, 7291, 15909, 30377, 11201, 2816, 25189, 27324, 7247, 1341, 31026, 23048, 26255, 17486, 12230, 29490,
		7077, 32153, 27524, 13662, 28720, 15628, 19246, 15510, 26401, 13478, 18520, 11632, 7885, 9529, 3357, 1003, 29761, 17518, 21008,
		18843, 28885, 17417, 22645, 30470, 13828, 24174, 21682, 1101, 23418, 3172, 23808, 27919, 29551, 18458, 12390, 11146, 10548, 360,
		27112, 28419, 11787, 10070, 29692, 4456, 26684, 27362, 20541, 4149, 6245, 7934, 1891, 3220, 26898, 23001, 21875, 5832, 7309, 15199,
		26163, 18635, 19704, 32003, 13793, 29750, 29336, 11964, 27172, 26466, 9332, 17741, 14147, 3533, 18207, 24010, 9621, 28607, 7634,
		23128, 19257, 21805, 29117, 15412, 19974, 4061, 17311, 24311, 16837, 12491, 15253, 31000, 13982, 11468, 19247, 1458, 3025, 13425,
		13769, 31623, 23207, 17198, 29465, 30022, 3495, 10683, 8196, 12041, 30732, 6075, 29110, 32034, 375, 26780, 24305, 8215, 14818,
		14270, 29605, 6635, 27093, 32727, 706, 26783, 29404, 18838, 10826, 18937, 5176, 11654, 23978, 27780, 26581, 11574, 27210, 12760,
		11132, 10135, 10851, 26139, 10826, 27813, 23057, 4296, 23137, 13385, 17065, 17071, 733, 31870, 12364, 1342, 32266, 4788, 26044,
		20222, 27604, 19569, 623, 8544, 26750, 13118, 3810, 13242, 7063, 10177, 9008, 20365, 13098, 16423, 23523, 16905, 7990, 26053, 4362,
		1747, 8541, 30206, 908, 4101, 1248, 27239, 29883, 20343, 4811, 19497, 23596, 25917, 5741, 30375, 12231, 6000, 1547, 28001, 29210,
		30514, 9174, 18712, 31474, 22252, 11033, 52, 11821, 30170, 23991, 3682, 5322, 1226, 1493, 16257, 3138, 26656, 16340, 8639, 27, 23326,
		8322, 25343, 25018, 22626, 2961, 7551, 21113, 27568, 20040, 22455, 13305, 20722, 21112, 15236, 4794, 1149, 32178, 18565, 7912,
		10390, 4279, 1477, 10104, 25653, 6960, 30363, 19316, 7945, 22431, 22223, 21907, 16059, 918, 25086, 30221, 18807, 2087, 10816, 20141,
		4521, 1691, 16903, 1320, 20228, 7526, 15691, 20397, 18633, 31067, 19940, 12221, 30022, 1821, 32567, 20285, 12957, 22742, 21780,
		13258, 31942, 5163, 20959, 15436, 17623, 31855, 10222, 7374, 19843, 27926, 6707, 19597, 12513, 22637, 20507, 6734, 29551, 7817,
		8373, 23285, 18519, 20605, 6423, 26196, 27377, 13265, 16894, 22081, 12680, 6703, 26804, 15339}
	fmt.Println(maxLength(data))
}
